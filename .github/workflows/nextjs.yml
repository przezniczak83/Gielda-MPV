import type { NextConfig } from "next";

const repoName = "Gielda-MPV";

// Vercel zawsze ustawia env: VERCEL=1 w build/runtime
const isVercel = process.env.VERCEL === "1";

// Ten przełącznik ustawimy TYLKO w GitHub Actions (Pages)
const isGitHubPages = !isVercel && process.env.GITHUB_PAGES === "true";

const nextConfig: NextConfig = {
  // GitHub Pages: statyczny export + ścieżka pod repo subpath
  ...(isGitHubPages
    ? {
        output: "export",
        basePath: `/${repoName}`,
        assetPrefix: `/${repoName}/`,
        images: { unoptimized: true },
      }
    : {
        // Vercel: normalny Next (API działa), bez basePath
        images: { unoptimized: true }, // możesz potem zmienić na false jeśli chcesz optymalizację
      }),
};

export default nextConfig;
